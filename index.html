<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>My Calendar To-Do</title>
<style>
:root {
  --bg:#0f1724;
  --card:#0b1220;
  --muted:#9aa4b2;
  --accent:#60a5fa;
  --task-h:40px;
  --gap:10px;
  --cell-min:80px;
  color-scheme: dark;
}
* {
  box-sizing: border-box;
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
}
html, body {
  height: 100%;
  margin: 0;
  background: linear-gradient(180deg,#071021 0%, #071521 100%);
  color: #e6eef6;
  overflow-x: hidden;
}
.app {
  max-width: 1100px;
  margin: 0 auto;
  padding: 1rem;
  display: grid;
  grid-template-columns: 320px 1fr;
  gap: 1rem;
}
.panel {
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  padding: 1rem;
  border-radius: 12px;
  box-shadow: 0 6px 20px rgba(2,6,23,0.6);
  min-height: 300px;
}
header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 0.75rem;
}
h1 {
  font-size: 1.25rem;
  margin: 0;
}
.muted {
  color: var(--muted);
  font-size: 0.85rem;
}

/* Sidebar */
.sidebar {
  display: flex;
  flex-direction: column;
}
.add {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 0.75rem;
}
.add input {
  flex: 1;
  padding: 0.6rem;
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,0.04);
  background: transparent;
  color: inherit;
}
.btn {
  background: var(--accent);
  border: none;
  padding: 0.6rem 0.9rem;
  border-radius: 8px;
  color: #05263b;
  cursor: pointer;
  font-size: 0.9rem;
  transition: background 0.2s;
}
.btn:hover {
  background: #3b82f6;
}
.btn.ghost {
  background: transparent;
  border: 1px solid rgba(255,255,255,0.1);
  color: var(--muted);
}
.tasks-list {
  overflow-y: auto;
  padding-right: 6px;
  flex: 1;
  max-height: 60vh;
}
.task {
  height: var(--task-h);
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px;
  border-radius: 8px;
  margin-bottom: 8px;
  background: rgba(255,255,255,0.03);
  border: 1px solid rgba(255,255,255,0.04);
  cursor: grab;
}
.task.dragging {
  opacity: 0.5;
}
.task .dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: var(--accent);
}
.task.completed .title {
  text-decoration: line-through;
  opacity: 0.6;
}
.task .title {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.task .icons {
  display: flex;
  gap: 8px;
}
.task button {
  background: transparent;
  border: none;
  color: var(--muted);
  cursor: pointer;
  font-size: 1rem;
}

/* Calendar */
.calendar {
  display: flex;
  flex-direction: column;
}
.cal-head {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: space-between;
  gap: 0.5rem;
  margin-bottom: 0.75rem;
}
.month-nav {
  display: flex;
  gap: 0.5rem;
  align-items: center;
}
.grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 6px;
}
.weekday {
  padding: 6px 8px;
  text-align: center;
  font-size: 0.8rem;
  color: var(--muted);
}
.cell {
  min-height: var(--cell-min);
  background: rgba(255,255,255,0.02);
  padding: 8px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.04);
  display: flex;
  flex-direction: column;
  transition: 0.2s;
}
.cell:hover {
  background: rgba(255,255,255,0.04);
}
.cell.out {
  opacity: 0.35;
}
.cell .date {
  font-size: 0.8rem;
  margin-bottom: 4px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.events {
  flex: 1;
  overflow: auto;
  padding-right: 4px;
}
.drop-target {
  min-height: 14px;
}
.cell.over {
  outline: 2px dashed rgba(96,165,250,0.35);
}
footer.small {
  margin-top: 10px;
  font-size: 0.75rem;
  color: var(--muted);
}

/* Responsive */
@media (max-width: 900px) {
  .app {
    grid-template-columns: 1fr;
    padding: 0.75rem;
  }
  .sidebar {
    order: 2;
    max-height: none;
  }
  .calendar {
    order: 1;
  }
  .grid {
    grid-template-columns: repeat(5, 1fr);
  }
  .task {
    font-size: 0.85rem;
  }
}
@media (max-width: 600px) {
  h1 { font-size: 1rem; }
  .btn { padding: 0.5rem 0.7rem; font-size: 0.8rem; }
  .calendar .grid { grid-template-columns: repeat(3, 1fr); }
  .cell { min-height: 70px; }
  .add { flex-direction: column; }
  .add input, .btn { width: 100%; }
  .tasks-list { max-height: 40vh; }
}
@media (max-width: 400px) {
  .calendar .grid { grid-template-columns: repeat(2, 1fr); }
}
</style>
</head>
<body>
<div class="app">
  <div class="panel sidebar">
    <header><h1>Tasks</h1></header>
    <div class="add">
      <input type="text" id="newTask" placeholder="New task..." />
      <button class="btn" id="addTask">Add</button>
    </div>
    <div class="tasks-list" id="tasksList"></div>
  </div>

  <div class="panel calendar">
    <div class="cal-head">
      <div class="month-nav">
        <button class="btn ghost" id="prevMonth">◀</button>
        <h1 id="monthLabel"></h1>
        <button class="btn ghost" id="nextMonth">▶</button>
      </div>
    </div>
    <div class="grid" id="calendarGrid"></div>
    <footer class="small">Drag tasks into calendar dates. Click ✅ to mark done.</footer>
  </div>
</div>

<script>
const tasksList = document.getElementById('tasksList');
const calendarGrid = document.getElementById('calendarGrid');
const newTaskInput = document.getElementById('newTask');
const addTaskBtn = document.getElementById('addTask');
const monthLabel = document.getElementById('monthLabel');
const prevMonthBtn = document.getElementById('prevMonth');
const nextMonthBtn = document.getElementById('nextMonth');

let tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
let currentDate = new Date();

function save() {
  localStorage.setItem('tasks', JSON.stringify(tasks));
}
function renderTasks() {
  tasksList.innerHTML = '';
  tasks.forEach(t => {
    if (!t.date) tasksList.appendChild(createTaskEl(t));
  });
  renderCalendar();
}
function createTaskEl(task) {
  const el = document.createElement('div');
  el.className = 'task' + (task.completed ? ' completed' : '');
  el.draggable = true;
  el.dataset.id = task.id;
  el.innerHTML = `
    <div class="dot"></div>
    <div class="title">${task.title}</div>
    <div class="icons">
      <button class="complete">✅</button>
      <button class="delete">✖</button>
    </div>
  `;
  el.querySelector('.delete').onclick = () => {
    tasks = tasks.filter(t => t.id !== task.id);
    save(); renderTasks();
  };
  el.querySelector('.complete').onclick = () => {
    task.completed = !task.completed;
    save(); renderTasks();
  };
  el.addEventListener('dragstart', e => {
    e.dataTransfer.setData('text/plain', task.id);
    el.classList.add('dragging');
  });
  el.addEventListener('dragend', () => el.classList.remove('dragging'));
  return el;
}

addTaskBtn.onclick = () => {
  const title = newTaskInput.value.trim();
  if (!title) return;
  tasks.push({id: Date.now(), title, completed:false, date:null});
  newTaskInput.value = '';
  save(); renderTasks();
};

function renderCalendar() {
  const year = currentDate.getFullYear();
  const month = currentDate.getMonth();
  const start = new Date(year, month, 1);
  const end = new Date(year, month + 1, 0);
  const days = [];
  const firstDay = start.getDay();
  for (let i=0;i<firstDay;i++) days.push(null);
  for (let d=1; d<=end.getDate(); d++) days.push(d);
  while (days.length % 7 !== 0) days.push(null);
  monthLabel.textContent = currentDate.toLocaleString('default',{month:'long',year:'numeric'});
  calendarGrid.innerHTML = '';
  ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'].forEach(w=>{
    const wEl=document.createElement('div');
    wEl.className='weekday';
    wEl.textContent=w;
    calendarGrid.appendChild(wEl);
  });
  days.forEach(day=>{
    const cell=document.createElement('div');
    cell.className='cell'+(day? '' : ' out');
    if(day){
      cell.dataset.date = new Date(year,month,day).toISOString().split('T')[0];
      cell.innerHTML=`<div class="date">${day}</div><div class="events"></div>`;
      const ev=cell.querySelector('.events');
      tasks.filter(t=>t.date===cell.dataset.date).forEach(t=>ev.appendChild(createTaskEl(t)));
      cell.addEventListener('dragover',e=>{e.preventDefault(); cell.classList.add('over');});
      cell.addEventListener('dragleave',()=>cell.classList.remove('over'));
      cell.addEventListener('drop',e=>{
        const id=+e.dataTransfer.getData('text/plain');
        const t=tasks.find(t=>t.id===id);
        t.date=cell.dataset.date;
        save(); renderTasks();
      });
    }
    calendarGrid.appendChild(cell);
  });
}

prevMonthBtn.onclick=()=>{currentDate.setMonth(currentDate.getMonth()-1);renderTasks();}
nextMonthBtn.onclick=()=>{currentDate.setMonth(currentDate.getMonth()+1);renderTasks();}
renderTasks();
</script>
</body>
</html>
